<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wx client</title>
    <link rel="stylesheet" href="/public/bootstrap.min.css">
    <style>
        .well {
            margin-left:20px;
            margin-right:20px;
        }
        .well img{
            width:60px;
            margin-right:15px;
        }
    </style>
</head>
<body>
<div id="msg">
    <div style="text-align: center;">
        <h3 style="color: #ac2925;">微信墙</h3>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script type="text/javascript">

    var socket = io();
    var msglist = document.getElementById('msg');
    socket.on('chat message', function(data) {
        var msg = JSON.parse(data);
        var content = msg.xml.Content[0];
        msg.user = msg.user || {};
        var userName = msg.user.nickname;
        var headimg = msg.user.headimgurl;
        var element1 = document.createElement('div');
        element1.className = 'well';
        element1.innerHTML = '<img src="' + headimg + '">' + '说：' + content;
        msglist.appendChild(element1);

//        $('#messages').append($('<li>').text(msg.xml.Content[0]));
//        $('#messages').append($('<li>').text(msg.user.nickname));
    });


</script>
</body>
</html>